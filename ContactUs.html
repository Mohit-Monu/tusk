<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Request a call back</title>
  </head>
  <style>
    * {
      margin: 5px;
      font-size: 20px;
    }
    .box {
      height: wrap;
      width: 50%;
      margin-left: 25%;
      background-color: aliceblue;
      border: 2px solid red;
    }
    input {
      width: 80%;
      height: 20px;
    }
    button {
      width: 90%;
      margin-top: 10px;
      height: 40px;
      color: red;
      background-color: white;
    }
    button:hover {
      background-color: gray;
    }
    .boxx {
      width: 90%;
    }
    .deleteBtn {
      width: fit-content;
      height: fit-content;
    }
  </style>
  <body
    style="
      background-image: url(https://cdn.pixabay.com/photo/2018/05/12/19/20/mosaic-3394375__340.jpg);
    "
  >
    <div class="box">
      <h2 style="color: orange">Request for a call back.</h2>
      <br />
      <h4>Please Fill up the form so we can contact you</h4>
      <br />
      <hr />
      <form class="pure-form">
        Name:
        <br />
        <input type="text" id="name" required />
        <br />
        Email-id:
        <br />
        <input type="text" id="email" required />
        <br />
        Phone-No:
        <br />
        <input type="text" id="phone" required />
        <br />
        Time to Call:
        <br />
        <input type="datetime-local" id="time" required />
        <br />
        <button type="submit" id="submitbtn"><b>Submit.</b></button>
      </form>
      <div class="boxx">
        <!-- <div>
          <h3>dgedgdsg</h3>
          <input type="button" value="Delete" class="deleteBtn" />
        </div> -->
      </div>
    </div>
  </body>
  <script>
    var namea = document.getElementById("name");
    var emaila = document.getElementById("email");
    var phonea = document.getElementById("phone");
    var timea = document.getElementById("time");
    //var showsdetailsa=document.getElementById('showsdetails');
    document
      .querySelector("form.pure-form")
      .addEventListener("submit", function (e) {
        if (confirm("Are You Sure")) {
          e.preventDefault();
          console.log(namea.value);
          console.log(emaila.value);
          console.log(phonea.value);
          console.log(timea.value);
          var myobj = {
            name: namea.value,
            email: emaila.value,
            phone: phonea.value,
            time: timea.value,
          };
          var stringofobj = JSON.stringify(myobj);
          localStorage.setItem(phonea.value, stringofobj);
          var showsdetailsa = document.createElement("h3");
          var div1 = document.createElement("div");
          var deleteBtn = document.createElement("input");
          var boxxa = document.querySelector(".boxx");
          deleteBtn.classList.add("deleteBtn");
          deleteBtn.value = "Delete";
          deleteBtn.type = "button";
          var out =
            namea.value +
            " - " +
            emaila.value +
            " - " +
            phonea.value +
            " - " +
            timea.value;
          out = out.toString();
          showsdetailsa.innerHTML = out;
          boxxa.appendChild(div1);
          div1.appendChild(showsdetailsa);
          div1.appendChild(deleteBtn);
          deleteBtn.addEventListener("click", deletef);
          function deletef(e) {
            var li = e.target.parentElement;
            var inputt = li.firstChild;

            inputt = inputt.textContent;

            var count = 0;
            var str = "";
            for (var i = 0; i < inputt.length; i++) {
              if (count == 2) {
                if (inputt[i] == "-") {
                  break;
                }
                str += inputt[i];
              }
              if (inputt[i] == "-") {
                count++;
              }
            }
            var keyy = "";
            for (var i = 1; i < str.length - 1; i++) {
              keyy += str[i];
            }
            console.log(keyy);
            localStorage.removeItem(keyy);


            boxxa.removeChild(li);
          }
        }
      });
  </script>
</html>
